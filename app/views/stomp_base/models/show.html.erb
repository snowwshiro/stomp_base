<div style="margin-bottom: 2rem;">
  <nav style="margin-bottom: 1rem;">
    <%= link_to "← " + t('stomp_base.models.list'), stomp_base.models_path, 
        style: "color: #3498db; text-decoration: none; font-weight: 500;" %>
  </nav>
  <h1 style="color: #2c3e50; margin: 0;"><%= t('stomp_base.models.model_information') %>: <%= @model_name %></h1>
</div>

<% if @model_class %>
  <!-- Model Info -->
  <div style="background: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin-bottom: 2rem; overflow: hidden;">
    <div style="background: #2c3e50; color: white; padding: 1rem;">
      <h2 style="margin: 0;"><%= t('stomp_base.models.table_info') %></h2>
    </div>
    
    <div style="padding: 2rem;">
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 2rem;">
        <div>
          <strong><%= t('stomp_base.models.table_name') %>:</strong><br>
          <code style="background: #f8f9fa; padding: 0.25rem 0.5rem; border-radius: 3px;"><%= @model_class.table_name %></code>
        </div>
        <div>
          <strong><%= t('stomp_base.models.column_count') %>:</strong><br>
          <span style="background: #e3f2fd; color: #1565c0; padding: 0.25rem 0.5rem; border-radius: 12px;">
            <%= @columns.size %> カラム
          </span>
        </div>
        <div>
          <strong><%= t('stomp_base.models.records') %>:</strong><br>
          <span style="background: #f3e5f5; color: #7b1fa2; padding: 0.25rem 0.5rem; border-radius: 12px;">
            <%= @total_count %> 件
          </span>
        </div>
      </div>
    </div>
  </div>

  <!-- Records Table -->
  <div style="background: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); overflow: hidden;">
    <div style="background: #2c3e50; color: white; padding: 1rem; display: flex; justify-content: space-between; align-items: center;">
      <h2 style="margin: 0;">レコード一覧</h2>
      <% if @total_count > @per_page %>
        <div style="color: #ecf0f1;">
          <%= t('stomp_base.models.pagination.page') %> <%= @current_page %> <%= t('stomp_base.models.pagination.of') %> <%= @total_pages %>
          (<%= t('stomp_base.models.pagination.showing') %> <%= @records.size %> <%= t('stomp_base.models.pagination.items') %>)
        </div>
      <% end %>
    </div>
    
    <% if @records.any? %>
      <div style="padding: 2rem; overflow-x: auto;">
        <table style="width: 100%; border-collapse: collapse; font-size: 0.875rem;">
          <thead>
            <tr style="background: #f8f9fa;">
              <% @columns.each do |column| %>
                <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid #dee2e6; white-space: nowrap;">
                  <%= column.humanize %>
                </th>
              <% end %>
            </tr>
          </thead>
          <tbody>
            <% @records.each do |record| %>
              <tr style="border-bottom: 1px solid #dee2e6;">
                <% @columns.each do |column| %>
                  <td style="padding: 0.75rem; max-width: 200px; overflow: hidden; text-overflow: ellipsis;">
                    <% value = record.send(column) %>
                    <% if value.nil? %>
                      <span style="color: #6c757d; font-style: italic;">NULL</span>
                    <% elsif value.is_a?(String) && value.length > 50 %>
                      <span title="<%= value %>"><%= value[0..50] %>...</span>
                    <% else %>
                      <%= value %>
                    <% end %>
                  </td>
                <% end %>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>

      <!-- Pagination -->
      <% if @total_pages > 1 %>
        <div style="padding: 1rem 2rem; background: #f8f9fa; border-top: 1px solid #dee2e6;">
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <div style="display: flex; gap: 0.5rem;">
              <% if @current_page > 1 %>
                <%= link_to t('stomp_base.models.pagination.prev'), 
                    stomp_base.model_path(@model_name, offset: (@current_page - 2) * @per_page, limit: @per_page), 
                    style: "padding: 0.5rem 1rem; background: #3498db; color: white; text-decoration: none; border-radius: 4px;" %>
              <% end %>
              
              <% if @current_page < @total_pages %>
                <%= link_to t('stomp_base.models.pagination.next'), 
                    stomp_base.model_path(@model_name, offset: @current_page * @per_page, limit: @per_page), 
                    style: "padding: 0.5rem 1rem; background: #3498db; color: white; text-decoration: none; border-radius: 4px;" %>
              <% end %>
            </div>
            
            <div style="color: #6c757d;">
              <%= t('stomp_base.models.pagination.total') %> <%= @total_count %> <%= t('stomp_base.models.pagination.items') %>
            </div>
          </div>
        </div>
      <% end %>
    <% else %>
      <div style="padding: 3rem; text-align: center;">
        <h3 style="color: #6c757d; margin-bottom: 1rem;"><%= t('stomp_base.models.no_records') %></h3>
        <p style="color: #6c757d;">このモデルにはレコードがありません。</p>
      </div>
    <% end %>
  </div>
<% else %>
  <div style="background: #f8d7da; color: #721c24; padding: 2rem; border-radius: 8px;">
    <h3>モデルが見つかりません</h3>
    <p>指定されたモデル '<%= @model_name %>' が見つかりませんでした。</p>
  </div>
<% end %>
